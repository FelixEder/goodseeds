{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n}), exports.default = firebaseConnect;\n\nvar _differenceWith2 = _interopRequireDefault(require(\"lodash/differenceWith\")),\n    _isEqual2 = _interopRequireDefault(require(\"lodash/isEqual\")),\n    _react = _interopRequireWildcard(require(\"react\")),\n    _propTypes = _interopRequireDefault(require(\"prop-types\")),\n    _hoistNonReactStatics = _interopRequireDefault(require(\"hoist-non-react-statics\")),\n    _query = require(\"./actions/query\"),\n    _utils = require(\"./utils\"),\n    _ReactReduxFirebaseContext = _interopRequireDefault(require(\"./ReactReduxFirebaseContext\"));\n\nfunction _getRequireWildcardCache() {\n  if (\"function\" != typeof WeakMap) return null;\n  var cache = new WeakMap();\n  return _getRequireWildcardCache = function () {\n    return cache;\n  }, cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) return obj;\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) return cache.get(obj);\n  var newObj = {};\n\n  if (null != obj) {\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      desc && (desc.get || desc.set) ? Object.defineProperty(newObj, key, desc) : newObj[key] = obj[key];\n    }\n  }\n\n  return newObj.default = obj, cache && cache.set(obj, newObj), newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _typeof(obj) {\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _extends() {\n  return _extends = Object.assign || function (target) {\n    for (var source, i = 1; i < arguments.length; i++) for (var key in source = arguments[i], source) Object.prototype.hasOwnProperty.call(source, key) && (target[key] = source[key]);\n\n    return target;\n  }, _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var source, i = 1; i < arguments.length; i++) source = null == arguments[i] ? {} : arguments[i], i % 2 ? ownKeys(source, !0).forEach(function (key) {\n    _defineProperty(target, key, source[key]);\n  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(source).forEach(function (key) {\n    Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n  });\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) throw new TypeError(\"Cannot call a class as a function\");\n}\n\nfunction _defineProperties(target, props) {\n  for (var descriptor, i = 0; i < props.length; i++) descriptor = props[i], descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, \"value\" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor);\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  return protoProps && _defineProperties(Constructor.prototype, protoProps), staticProps && _defineProperties(Constructor, staticProps), Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  return call && (\"object\" === _typeof(call) || \"function\" == typeof call) ? call : _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function (o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (void 0 === self) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (\"function\" != typeof superClass && null !== superClass) throw new TypeError(\"Super expression must either be null or a function\");\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: !0,\n      configurable: !0\n    }\n  }), superClass && _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  return _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    return o.__proto__ = p, o;\n  }, _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  return key in obj ? Object.defineProperty(obj, key, {\n    value: value,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : obj[key] = value, obj;\n}\n\nfunction firebaseConnect() {\n  var queriesConfig = 0 < arguments.length && arguments[0] !== void 0 ? arguments[0] : [];\n  return function (WrappedComponent) {\n    function FirebaseConnectWithContext(props) {\n      return _react.default.createElement(_ReactReduxFirebaseContext.default.Consumer, null, function (_internalFirebase) {\n        return _react.default.createElement(FirebaseConnectWrapped, _extends({}, props, {\n          dispatch: _internalFirebase.dispatch,\n          firebase: _internalFirebase\n        }));\n      });\n    }\n\n    var FirebaseConnectWrapped = function (_Component) {\n      function FirebaseConnectWrapped() {\n        var _getPrototypeOf2, _this;\n\n        _classCallCheck(this, FirebaseConnectWrapped);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];\n\n        return _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(FirebaseConnectWrapped)).call.apply(_getPrototypeOf2, [this].concat(args))), _defineProperty(_assertThisInitialized(_this), \"firebaseEvents\", []), _defineProperty(_assertThisInitialized(_this), \"firebase\", null), _defineProperty(_assertThisInitialized(_this), \"prevData\", null), _this;\n      }\n\n      return _inherits(FirebaseConnectWrapped, _Component), _createClass(FirebaseConnectWrapped, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this$props = this.props,\n              firebase = _this$props.firebase,\n              dispatch = _this$props.dispatch,\n              inputAsFunc = (0, _utils.createCallable)(queriesConfig);\n          this.prevData = inputAsFunc(this.props, this.props);\n          var ref = firebase.ref,\n              helpers = firebase.helpers,\n              storage = firebase.storage,\n              database = firebase.database,\n              auth = firebase.auth;\n          this.firebase = _objectSpread({\n            ref: ref,\n            storage: storage,\n            database: database,\n            auth: auth\n          }, helpers), this._firebaseEvents = (0, _utils.getEventsFromInput)(this.prevData), (0, _query.watchEvents)(firebase, dispatch, this._firebaseEvents);\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          var _this$props2 = this.props,\n              firebase = _this$props2.firebase,\n              dispatch = _this$props2.dispatch;\n          (0, _query.unWatchEvents)(firebase, dispatch, this._firebaseEvents);\n        }\n      }, {\n        key: \"UNSAFE_componentWillReceiveProps\",\n        value: function UNSAFE_componentWillReceiveProps(np) {\n          var _this$props3 = this.props,\n              firebase = _this$props3.firebase,\n              dispatch = _this$props3.dispatch,\n              inputAsFunc = (0, _utils.createCallable)(queriesConfig),\n              data = inputAsFunc(np, this.store);\n\n          if (!(0, _isEqual2.default)(data, this.prevData)) {\n            var itemsToSubscribe = (0, _differenceWith2.default)(data, this.prevData, _isEqual2.default),\n                itemsToUnsubscribe = (0, _differenceWith2.default)(this.prevData, data, _isEqual2.default);\n            this.prevData = data, (0, _query.unWatchEvents)(firebase, dispatch, (0, _utils.getEventsFromInput)(itemsToUnsubscribe)), this._firebaseEvents = (0, _utils.getEventsFromInput)(data), (0, _query.watchEvents)(firebase, dispatch, (0, _utils.getEventsFromInput)(itemsToSubscribe));\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          return _react.default.createElement(WrappedComponent, this.props);\n        }\n      }]), FirebaseConnectWrapped;\n    }(_react.Component);\n\n    return _defineProperty(FirebaseConnectWrapped, \"displayName\", (0, _utils.wrapDisplayName)(WrappedComponent, \"FirebaseConnectWrapped\")), _defineProperty(FirebaseConnectWrapped, \"wrappedComponent\", WrappedComponent), FirebaseConnectWrapped.propTypes = {\n      dispatch: _propTypes.default.func.isRequired,\n      firebase: _propTypes.default.object.isRequired\n    }, FirebaseConnectWithContext.displayName = (0, _utils.wrapDisplayName)(WrappedComponent, \"FirebaseConnect\"), FirebaseConnectWithContext.wrappedComponent = WrappedComponent, (0, _hoistNonReactStatics.default)(FirebaseConnectWithContext, WrappedComponent);\n  };\n}\n\nmodule.exports = exports.default;","map":{"version":3,"sources":["../src/firebaseConnect.js"],"names":["queriesConfig","FirebaseConnectWrapped","Component","WrappedComponent","firebase","dispatch","inputAsFunc","ref","helpers","storage","database","auth","data","itemsToSubscribe","itemsToUnsubscribe","PropTypes","_internalFirebase","FirebaseConnectWithContext"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { isEqual, differenceWith } from 'lodash'\nimport hoistStatics from 'hoist-non-react-statics'\nimport { watchEvents, unWatchEvents } from './actions/query'\nimport { getEventsFromInput, createCallable, wrapDisplayName } from './utils'\nimport ReactReduxFirebaseContext from './ReactReduxFirebaseContext'\n\n/**\n * @augments React.Component\n * @description React Higher Order Component that automatically listens/unListens to\n * Firebase Real Time Database on mount/unmount of the component. This uses\n * React's Component Lifecycle hooks.\n * @param {Array|Function} queriesConfig - Array of objects or strings for paths to sync\n * from Firebase. Can also be a function that returns the array. The function\n * is passed the current props and the firebase object.\n * @returns {Function} - that accepts a component to wrap and returns the wrapped component\n * @see https://react-redux-firebase.com/docs/api/firebaseConnect.html\n * @example <caption>Basic</caption>\n * // props.firebase set on App component as firebase object with helpers\n * import { firebaseConnect } from 'react-redux-firebase'\n * export default firebaseConnect()(App)\n * @example <caption>Ordered Data</caption>\n * import React from 'react'\n * import { compose } from 'redux'\n * import { connect } from 'react-redux'\n * import { firebaseConnect } from 'react-redux-firebase'\n *\n * const enhance = compose(\n *   firebaseConnect([\n *     'todos' // sync /todos from firebase into redux\n *   ]),\n *   connect((state) => ({\n *     todos: state.firebase.ordered.todos\n *   }))\n * )\n *\n * function Todos({ todos }) {\n *   return (\n *     <div>\n *       {JSON.stringify(todos, null, 2)}\n *     </div>\n *   )\n * }\n *\n * export default enhance(Todos)\n * @example <caption>Data that depends on props</caption>\n * import React from 'react'\n * import { compose } from 'redux'\n * import { connect } from 'react-redux'\n * import { get } from 'lodash'\n * import { firebaseConnect } from 'react-redux-firebase'\n *\n * const enhance = compose(\n *   firebaseConnect((props) => ([\n *     `posts/${props.postId}` // sync /posts/postId from firebase into redux\n *   ])),\n *   connect((state, props) => ({\n *     post: get(state.firebase.data, `posts.${props.postId}`),\n *   }))\n * )\n *\n * function Post({ post }) {\n *   return (\n *     <div>\n *      {JSON.stringify(post, null, 2)}\n *     </div>\n *   )\n * }\n *\n * export default enhance(Post)\n */\nexport default function firebaseConnect(queriesConfig = []) {\n  return WrappedComponent => {\n    class FirebaseConnectWrapped extends Component {\n      static displayName = wrapDisplayName(\n        WrappedComponent,\n        'FirebaseConnectWrapped'\n      )\n      static wrappedComponent = WrappedComponent\n\n      firebaseEvents = []\n      firebase = null\n      prevData = null\n\n      componentDidMount() {\n        const { firebase, dispatch } = this.props\n\n        // Allow function to be passed\n        const inputAsFunc = createCallable(queriesConfig)\n        this.prevData = inputAsFunc(this.props, this.props)\n\n        const { ref, helpers, storage, database, auth } = firebase\n        this.firebase = { ref, storage, database, auth, ...helpers }\n\n        this._firebaseEvents = getEventsFromInput(this.prevData)\n\n        watchEvents(firebase, dispatch, this._firebaseEvents)\n      }\n\n      componentWillUnmount() {\n        const { firebase, dispatch } = this.props\n        unWatchEvents(firebase, dispatch, this._firebaseEvents)\n      }\n\n      /* eslint-disable camelcase */\n      UNSAFE_componentWillReceiveProps(np) {\n        /* eslint-enable camelcase */\n        const { firebase, dispatch } = this.props\n        const inputAsFunc = createCallable(queriesConfig)\n        const data = inputAsFunc(np, this.store)\n\n        // Handle a data parameter having changed\n        if (!isEqual(data, this.prevData)) {\n          const itemsToSubscribe = differenceWith(data, this.prevData, isEqual)\n          const itemsToUnsubscribe = differenceWith(\n            this.prevData,\n            data,\n            isEqual\n          )\n\n          this.prevData = data\n          // UnWatch all current events\n          unWatchEvents(\n            firebase,\n            dispatch,\n            getEventsFromInput(itemsToUnsubscribe)\n          )\n          // Get watch events from new data\n          this._firebaseEvents = getEventsFromInput(data)\n\n          // Watch new events\n          watchEvents(firebase, dispatch, getEventsFromInput(itemsToSubscribe))\n        }\n      }\n\n      render() {\n        return <WrappedComponent {...this.props} />\n      }\n    }\n\n    FirebaseConnectWrapped.propTypes = {\n      dispatch: PropTypes.func.isRequired,\n      firebase: PropTypes.object.isRequired\n    }\n\n    /**\n     * Render component wrapped in context\n     * @param {object} props - Component props\n     * @returns {React.Component} Component wrapped in context\n     */\n    function FirebaseConnectWithContext(props) {\n      return (\n        <ReactReduxFirebaseContext.Consumer>\n          {_internalFirebase => (\n            <FirebaseConnectWrapped\n              {...props}\n              dispatch={_internalFirebase.dispatch}\n              firebase={_internalFirebase}\n            />\n          )}\n        </ReactReduxFirebaseContext.Consumer>\n      )\n    }\n\n    FirebaseConnectWithContext.displayName = wrapDisplayName(\n      WrappedComponent,\n      'FirebaseConnect'\n    )\n\n    FirebaseConnectWithContext.wrappedComponent = WrappedComponent\n\n    return hoistStatics(FirebaseConnectWithContext, WrappedComponent)\n  }\n}\n"]},"metadata":{},"sourceType":"script"}