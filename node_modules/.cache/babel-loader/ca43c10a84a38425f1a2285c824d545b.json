{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = crossSliceReducer;\n\nvar _get2 = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _set2 = _interopRequireDefault(require(\"lodash/set\"));\n\nvar _merge2 = _interopRequireDefault(require(\"lodash/merge\"));\n\nvar _groupBy2 = _interopRequireDefault(require(\"lodash/groupBy\"));\n\nvar _immer = _interopRequireDefault(require(\"immer\"));\n\nvar _constants = require(\"../constants\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction crossSliceReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return (0, _immer.default)(state, function (draft) {\n    switch (action.type) {\n      case _constants.actionTypes.DOCUMENT_MODIFIED:\n      case _constants.actionTypes.DOCUMENT_ADDED:\n      case _constants.actionTypes.DOCUMENT_REMOVED:\n      case _constants.actionTypes.LISTENER_RESPONSE:\n      case _constants.actionTypes.UNSET_LISTENER:\n        var groups = (0, _groupBy2.default)(!!state.queries && Object.values(state.queries) || [], function (c) {\n          return c.storeAs || c.collection;\n        });\n        Object.keys(groups).forEach(function (storeAs) {\n          var updated = {};\n          groups[storeAs].forEach(function (item) {\n            return (0, _merge2.default)(updated, (0, _get2.default)(item, 'data', {}));\n          });\n          (0, _set2.default)(draft, ['composite', storeAs], updated);\n        });\n        return draft;\n\n      default:\n        return state;\n    }\n  });\n}","map":{"version":3,"sources":["/Users/Lara/Documents/Kurser/VT20/Dynwebb/goodseeds/node_modules/redux-firestore/es/reducers/crossSliceReducer.js"],"names":["Object","defineProperty","exports","value","default","crossSliceReducer","_get2","_interopRequireDefault","require","_set2","_merge2","_groupBy2","_immer","_constants","obj","__esModule","state","arguments","length","undefined","action","draft","type","actionTypes","DOCUMENT_MODIFIED","DOCUMENT_ADDED","DOCUMENT_REMOVED","LISTENER_RESPONSE","UNSET_LISTENER","groups","queries","values","c","storeAs","collection","keys","forEach","updated","item"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkBC,iBAAlB;;AAEA,IAAIC,KAAK,GAAGC,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAlC;;AAEA,IAAIC,KAAK,GAAGF,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAlC;;AAEA,IAAIE,OAAO,GAAGH,sBAAsB,CAACC,OAAO,CAAC,cAAD,CAAR,CAApC;;AAEA,IAAIG,SAAS,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,gBAAD,CAAR,CAAtC;;AAEA,IAAII,MAAM,GAAGL,sBAAsB,CAACC,OAAO,CAAC,OAAD,CAAR,CAAnC;;AAEA,IAAIK,UAAU,GAAGL,OAAO,CAAC,cAAD,CAAxB;;AAEA,SAASD,sBAAT,CAAgCO,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEV,IAAAA,OAAO,EAAEU;AAAX,GAArC;AAAwD;;AAE/F,SAAST,iBAAT,GAA6B;AAC3B,MAAIW,KAAK,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAhF;AACA,MAAIG,MAAM,GAAGH,SAAS,CAACC,MAAV,GAAmB,CAAnB,GAAuBD,SAAS,CAAC,CAAD,CAAhC,GAAsCE,SAAnD;AACA,SAAO,CAAC,GAAGP,MAAM,CAACR,OAAX,EAAoBY,KAApB,EAA2B,UAAUK,KAAV,EAAiB;AACjD,YAAQD,MAAM,CAACE,IAAf;AACE,WAAKT,UAAU,CAACU,WAAX,CAAuBC,iBAA5B;AACA,WAAKX,UAAU,CAACU,WAAX,CAAuBE,cAA5B;AACA,WAAKZ,UAAU,CAACU,WAAX,CAAuBG,gBAA5B;AACA,WAAKb,UAAU,CAACU,WAAX,CAAuBI,iBAA5B;AACA,WAAKd,UAAU,CAACU,WAAX,CAAuBK,cAA5B;AACE,YAAIC,MAAM,GAAG,CAAC,GAAGlB,SAAS,CAACP,OAAd,EAAuB,CAAC,CAACY,KAAK,CAACc,OAAR,IAAmB9B,MAAM,CAAC+B,MAAP,CAAcf,KAAK,CAACc,OAApB,CAAnB,IAAmD,EAA1E,EAA8E,UAAUE,CAAV,EAAa;AACtG,iBAAOA,CAAC,CAACC,OAAF,IAAaD,CAAC,CAACE,UAAtB;AACD,SAFY,CAAb;AAGAlC,QAAAA,MAAM,CAACmC,IAAP,CAAYN,MAAZ,EAAoBO,OAApB,CAA4B,UAAUH,OAAV,EAAmB;AAC7C,cAAII,OAAO,GAAG,EAAd;AACAR,UAAAA,MAAM,CAACI,OAAD,CAAN,CAAgBG,OAAhB,CAAwB,UAAUE,IAAV,EAAgB;AACtC,mBAAO,CAAC,GAAG5B,OAAO,CAACN,OAAZ,EAAqBiC,OAArB,EAA8B,CAAC,GAAG/B,KAAK,CAACF,OAAV,EAAmBkC,IAAnB,EAAyB,MAAzB,EAAiC,EAAjC,CAA9B,CAAP;AACD,WAFD;AAGA,WAAC,GAAG7B,KAAK,CAACL,OAAV,EAAmBiB,KAAnB,EAA0B,CAAC,WAAD,EAAcY,OAAd,CAA1B,EAAkDI,OAAlD;AACD,SAND;AAOA,eAAOhB,KAAP;;AAEF;AACE,eAAOL,KAAP;AAnBJ;AAqBD,GAtBM,CAAP;AAuBD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = crossSliceReducer;\n\nvar _get2 = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _set2 = _interopRequireDefault(require(\"lodash/set\"));\n\nvar _merge2 = _interopRequireDefault(require(\"lodash/merge\"));\n\nvar _groupBy2 = _interopRequireDefault(require(\"lodash/groupBy\"));\n\nvar _immer = _interopRequireDefault(require(\"immer\"));\n\nvar _constants = require(\"../constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction crossSliceReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return (0, _immer.default)(state, function (draft) {\n    switch (action.type) {\n      case _constants.actionTypes.DOCUMENT_MODIFIED:\n      case _constants.actionTypes.DOCUMENT_ADDED:\n      case _constants.actionTypes.DOCUMENT_REMOVED:\n      case _constants.actionTypes.LISTENER_RESPONSE:\n      case _constants.actionTypes.UNSET_LISTENER:\n        var groups = (0, _groupBy2.default)(!!state.queries && Object.values(state.queries) || [], function (c) {\n          return c.storeAs || c.collection;\n        });\n        Object.keys(groups).forEach(function (storeAs) {\n          var updated = {};\n          groups[storeAs].forEach(function (item) {\n            return (0, _merge2.default)(updated, (0, _get2.default)(item, 'data', {}));\n          });\n          (0, _set2.default)(draft, ['composite', storeAs], updated);\n        });\n        return draft;\n\n      default:\n        return state;\n    }\n  });\n}"]},"metadata":{},"sourceType":"script"}